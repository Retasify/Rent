<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floral-Accented Black Tie Ensemble - Retasify</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./fonts/fonts.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./images/favicon.png" type="image/x-icon">
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr-bulma-theme/dist/flatpickr-bulma.min.css">
    <!-- Flatpickr JS (load before our scripts) -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Our scripts -->
    <script type="module" src="../Backend/view-details.js"></script>
    <script type="module" src="../Backend/add-watchlist.js"></script>
    <script type="module" src="../Backend/user-login.js"></script>
    <script type="module" src="../Backend/logout.js"></script>
    <script type="module" src="../Backend/rent-item.js"></script>
</head>

<!-- modals -->
 <!-- Dropdown Menu -->
<div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 hidden " id="dropdownMenu">
    <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
        <i class="fas fa-user mr-3 text-gray-400"></i>
        Profile
    </a>
    <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
        <i class="fas fa-store mr-3 text-gray-400"></i>
        Become a Seller
    </a>
    <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
        <i class="fas fa-cog mr-3 text-gray-400"></i>
        Settings
    </a>
    <hr class="my-2 border-gray-200">
    <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors" id="logoutButton">
        <i class="fas fa-sign-out-alt mr-3 text-gray-400"></i>
        Log Out
    </a>
</div>

<!-- renter details -->
<div class="fixed inset-0 flex items-center justify-center z-50 hidden" id="renterDetailsModal">
    <div class="w-[420px] bg-white rounded-3xl shadow-xl p-10 flex flex-col overflow-y-auto content-center justify-center items-center"
         style="min-height: 700px; position: relative;">
        
        
        <!-- Title -->
        <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Rental Form</h2>
        
        <!-- Form fields -->
        <form class="flex flex-col gap-8 mt-2">
            <div>
                <label class="block text-lg font-normal text-gray-800 mb-2">
                    First Name <span class="ml-2">Last Name</span>
                    <span class="text-red-500 text-lg">*</span>
                </label>
                <input type="text" placeholder="Ex. John"
                       class="w-full px-6 py-3 rounded-full border border-[#C7D1B7] bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#C7D1B7] text-lg font-normal placeholder-gray-400" />
            </div>
            <div class="w-full">
                <label class="block text-lg font-normal text-gray-800 mb-2">
                    Start Date
                    <span class="text-red-500 text-lg">*</span>
                </label>
                <input type="text" id="startDate" placeholder="Select start date"
                       class="w-full px-6 py-3 rounded-full border border-[#C7D1B7] bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#C7D1B7] text-lg font-normal placeholder-gray-400 mb-4"
                       readonly>
                
                <label class="block text-lg font-normal text-gray-800 mb-2">
                    End Date
                    <span class="text-red-500 text-lg">*</span>
                </label>
                <input type="text" id="endDate" placeholder="Select end date"
                       class="w-full px-6 py-3 rounded-full border border-[#C7D1B7] bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#C7D1B7] text-lg font-normal placeholder-gray-400"
                       readonly>
            </div>
            <div>
                <label class="block text-lg font-normal text-gray-800 mb-2">
                    Final Price
                    <span class="text-red-500 text-lg">*</span>
                </label>
                <div class="flex items-center gap-2 font-bold mb-6">
                    <span>₱</span> <h1 id="price" class="text-2xl font-bold text-black">100</h1>
                </div>
            </div>
        </form>
        
        <!-- Payment disclaimer -->
        <p class="text-sm text-gray-600 mt-4 mb-2 text-center px-4">
            Note: Additional payment will be done in the rental shop, which will serve as your security deposit. It will be returned once the rental is returned.
        </p>
        <p class="text-sm text-gray-600 mt-4 mb-4 text-center px-4">
            Note: ID will be required for the rental shop.
        </p>
        
        <div>
            <button type="button" class="p-3 bg-[#F4B840] text-white rounded-full">Confirm Order</button>
            <button type="button" class="p-3 px-11 text-black rounded-full border border-[#48583B]" onclick="closeRenterModal()">Cancel</button>
        </div>
    </div>
</div>

<body class="font-sans bg-[#FAF5EF] min-h-screen">
    <!-- Header -->
    <header class="bg-[#48583B] p-4 md:px-8 flex items-center justify-between">
        <div class="flex items-center gap-8">
            <img src="./images/RetasifyLogo.svg" alt="Retasify Logo" class="h-12 w-auto bg-white p-2 px-8 rounded-full ml-20">
            
            <nav class="hidden md:flex items-center gap-6 ml-5">
                <a href="#" class="text-white hover:text-[#F4B840] transition-colors">Categories</a>
                <a href="#" class="text-white hover:text-[#F4B840] transition-colors">Donate/Pickup</a>
                <a href="#" class="text-white hover:text-[#F4B840] transition-colors">Upcycle</a>
            </nav>
        </div>
        
        <div class="flex-1 max-w-md mx-8 hidden md:block">
            <div class="relative">
                <input type="text" placeholder="Search keywords" class="w-full px-4 py-2 rounded-full border border-gray-500 focus:outline-none focus:ring-2 focus:ring-[#F4B840] bg-white">
                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
        
        <div class="flex items-center gap-3" id="userAuthButtons">
            <!-- These will be dynamically populated by user-login.js -->
            <a href="login.html" class="bg-[#F4B840] text-white px-6 py-2 rounded-full hover:bg-orange-500 transition-colors text-sm font-medium" id="signIn">Sign In</a>
        </div>
        
        <!-- User dropdown menu (hidden by default) -->
        <div class="hidden" id="userDropdown">
            <button class="flex items-center gap-2 text-white hover:text-[#F4B840] transition-colors">
                <span id="userGreeting"></span>
                <i class="fas fa-chevron-down text-xs"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="px-8 md:px-16 py-8">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                <!-- Left Column - Images -->
                <div class="space-y-4">
                    <!-- Images Container -->
                    <div class="flex gap-4">
                        <!-- Thumbnail Im-40s -->
                        <div class="flex flex-col gap-3 w-24" id="thumbnailContainer">
                            <img src="./images/Placeholder_img.png" alt="Thumbnail 1" class="w-full h-40 object-cover rounded-lg bg-gray-300 cursor-pointer border-2 border-[#F4B840]">
                            <img src="./images/Placeholder_img.png" alt="Thumbnail 2" class="w-full h-40 object-cover rounded-lg bg-gray-300 cursor-pointer border-2 border-transparent hover:border-[#F4B840]">
                            <img src="./images/Placeholder_img.png" alt="Thumbnail 3" class="w-full h-40 object-cover rounded-lg bg-gray-300 cursor-pointer border-2 border-transparent hover:border-[#F4B840]">
                            <img src="./images/Placeholder_img.png" alt="Thumbnail 4" class="w-full h-40 object-cover rounded-lg bg-gray-300 cursor-pointer border-2 border-transparent hover:border-[#F4B840]">
                        </div>

                        <!-- Main Image -->
                        <div class="relative flex-1">
                            <img src="./images/Placeholder_img.png" alt="Floral-Accented Black Tie Ensemble" class="w-full h-[675px] object-cover rounded-2xl bg-gray-300" id="mainImage">
                            <div class="absolute top-4 left-4 bg-[#F4B840] text-white px-4 py-2 rounded-full text-sm font-medium">
                                <i class="fas fa-check mr-1 text-[#F4B840] bg-white p-2 rounded-full"></i>
                                Available
                            </div>
                            <div class="absolute top-4 right-4 flex gap-2">
                                <button class="bg-white rounded-full p-2 shadow-md hover:bg-gray-50">
                                    <i class="fas fa-up-right-and-down-left-from-center text-[#48583B]"></i>
                                </button>
                                <button class="flex bg-white rounded-full p-2 shadow-md hover:bg-gray-50 content-center">
                                    <h3 class="text-[#48583B] mb-1 mr-2">100</h3>
                                    <i class="fas fa-heart text-[#48583B] mt-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Product Details -->
                <div class="space-y-6">
                    <!-- Product Title and Rating -->
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2" id="listingTitle">Floral-Accented Black Tie Ensemble</h1>
                        <p class="text-gray-600 mb-4"id="listingTeaser">Classic black tie attire enhanced with floral accents</p>
                        
                        <!-- User Info -->
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 bg-[#F4B840] rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800" id="sellerName">@username</p>
                                <p class="text-sm text-gray-500" id="sellerLoc">Shop Location</p>
                            </div>
                            <button class="ml-auto text-gray-400">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Product Options -->
                    <div class="space-y-6">
                        <!-- Type -->
                        <div class="flex justify-between items-center">
                            <span class="text-[#48583B] font-bold text-lg">Type</span>
                            <span class="text-gray-800 font-light text-lg" id="itemClass">Formal Wear</span>
                        </div>

                        <!-- Size Availability -->
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-[#48583B] font-bold">Size Availability</span>
                                <span class="text-gray-800 font-light" id="itemSize">M</span>
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-600">Length:</span>
                                <span class="text-gray-800 font-medium" id="itemLength">N/A</span>
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-600">Waist:</span>
                                <span class="text-gray-800 font-medium" id="itemWaist">N/A</span>
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-600">Bust:</span>
                                <span class="text-gray-800 font-medium" id="itemBust">N/A</span>
                            </div>
                        </div>

                        
                        <!-- Pickup Area -->
                        <div>
                            <span class="text-[#48583B] block mb-2 font-bold">Pickup Area</span>
                            <div class="flex items-center gap-2 p-3 bg-gray-50 rounded-lg">
                                <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                <div>
                                    <p class="text-sm font-medium"id="pickupArea">Stall 45-50, Mahalika Livelihood Center</p>
                                    <p class="text-xs text-gray-500">Kagitingan Avenue, Corner Albano St</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Price and Actions -->
                    <div class="border-t pt-6">
                        <div class="justify-between flex mb-6">
                            <p class="font-medium text-gray-600 mb-1">Rental Price / day</p>
                            <p class="text-3xl font-bold text-gray-800"id="finalPrice">Php 1,200</p>
                        </div>

                        <div class="space-y-3">
                            <button class="w-full bg-[#F4B840] text-white py-3 rounded-full font-medium hover:bg-orange-500 transition-colors" id="rentBtn">
                                Rent Now
                            </button>
                            <button class="w-full border border-gray-300 text-gray-700 py-3 rounded-full font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2" id="watchlistBtn">
                                <i class="fas fa-bookmark"></i>
                                Add to Watchlist
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Description -->
            <div class="mt-12">
                <div class="border-b border-gray-200 mb-6">
                    <nav class="flex gap-8">
                        <button class="text-[#F4B840] border-b-2 border-[#F4B840] pb-2 font-medium"id="descBtn">DESCRIPTION</button>
                        <button class="text-gray-600 pb-2 hover:text-[#F4B840]"id="reviewsBtn">REVIEWS</button>
                    </nav>
                </div>
                <div class="max-w-4xl" id="listingDescContainer">
                    <p class="text-gray-600 leading-relaxed" id="listingDesc">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim 
                        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit 
                        esse cillum dolore eu fugiat nulla pariatur.
                    </p>
                </div>
            </div>

            <!-- Similar Items -->
            <div class="mt-16">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Similar Items</h2>
                    <a href="#" class="text-[#F4B840] hover:underline">See all</a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Similar Item 1 -->
                    <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-3">
                        <div class="relative">
                            <img src="./images/Placeholder_img.png" alt="Black Suit" class="w-full h-48 object-cover rounded-2xl bg-gray-300">
                            <div class="absolute top-3 left-3 bg-white rounded-full p-2 shadow-md">
                                <i class="far fa-heart text-gray-400 text-xs"></i>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-lg font-semibold text-gray-800">Black Suit</h3>
                                <div class="flex items-center gap-1">
                                    <span class="text-[#F4B840] text-sm">★</span>
                                    <span class="text-sm font-medium text-gray-800">4.9</span>
                                    <span class="text-gray-400 text-sm">(85)</span>
                                </div>
                            </div>
                            <p class="text-gray-500 text-sm mb-1">Cultural Wear, M</p>
                            <p class="text-gray-500 text-sm mb-3">Mahalika Livelihood Center</p>
                            
                            <hr class="border-gray-300 mb-3">
                            
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-lg font-bold text-gray-800">Php 1,200</p>
                                    <p class="text-gray-500 text-xs">/3 days</p>
                                </div>
                                <button class="bg-[#48583B] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-700 transition-colors">
                                    Rent Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Similar Item 2 -->
                    <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-3">
                        <div class="relative">
                            <img src="./images/Placeholder_img.png" alt="Black Suit" class="w-full h-48 object-cover rounded-2xl bg-gray-300">
                            <div class="absolute top-3 left-3 bg-white rounded-full p-2 shadow-md">
                                <i class="far fa-heart text-gray-400 text-xs"></i>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-lg font-semibold text-gray-800">Black Suit</h3>
                                <div class="flex items-center gap-1">
                                    <span class="text-[#F4B840] text-sm">★</span>
                                    <span class="text-sm font-medium text-gray-800">4.9</span>
                                    <span class="text-gray-400 text-sm">(85)</span>
                                </div>
                            </div>
                            <p class="text-gray-500 text-sm mb-1">Cultural Wear, M</p>
                            <p class="text-gray-500 text-sm mb-3">Mahalika Livelihood Center</p>
                            
                            <hr class="border-gray-300 mb-3">
                            
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-lg font-bold text-gray-800">Php 1,200</p>
                                    <p class="text-gray-500 text-xs">/3 days</p>
                                </div>
                                <button class="bg-[#48583B] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-700 transition-colors">
                                    Rent Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Similar Item 3 -->
                    <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-3">
                        <div class="relative">
                            <img src="./images/Placeholder_img.png" alt="Black Suit" class="w-full h-48 object-cover rounded-2xl bg-gray-300">
                            <div class="absolute top-3 left-3 bg-white rounded-full p-2 shadow-md">
                                <i class="far fa-heart text-gray-400 text-xs"></i>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-lg font-semibold text-gray-800">Black Suit</h3>
                                <div class="flex items-center gap-1">
                                    <span class="text-[#F4B840] text-sm">★</span>
                                    <span class="text-sm font-medium text-gray-800">4.9</span>
                                    <span class="text-gray-400 text-sm">(85)</span>
                                </div>
                            </div>
                            <p class="text-gray-500 text-sm mb-1">Cultural Wear, M</p>
                            <p class="text-gray-500 text-sm mb-3">Mahalika Livelihood Center</p>
                            
                            <hr class="border-gray-300 mb-3">
                            
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-lg font-bold text-gray-800">Php 1,200</p>
                                    <p class="text-gray-500 text-xs">/3 days</p>
                                </div>
                                <button class="bg-[#48583B] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-700 transition-colors">
                                    Rent Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Similar Item 4 -->
                    <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-3">
                        <div class="relative">
                            <img src="./images/Placeholder_img.png" alt="Black Suit" class="w-full h-48 object-cover rounded-2xl bg-gray-300">
                            <div class="absolute top-3 left-3 bg-white rounded-full p-2 shadow-md">
                                <i class="far fa-heart text-gray-400 text-xs"></i>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-lg font-semibold text-gray-800">Black Suit</h3>
                                <div class="flex items-center gap-1">
                                    <span class="text-[#F4B840] text-sm">★</span>
                                    <span class="text-sm font-medium text-gray-800">4.9</span>
                                    <span class="text-gray-400 text-sm">(85)</span>
                                </div>
                            </div>
                            <p class="text-gray-500 text-sm mb-1">Cultural Wear, M</p>
                            <p class="text-gray-500 text-sm mb-3">Mahalika Livelihood Center</p>
                            
                            <hr class="border-gray-300 mb-3">
                            
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-lg font-bold text-gray-800">Php 1,200</p>
                                    <p class="text-gray-500 text-xs">/3 days</p>
                                </div>
                                <button class="bg-[#48583B] text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-700 transition-colors">
                                    Rent Now
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#48583B] px-8 md:px-10 py-16" data-aos="fade-up">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 mb-12">
                <div class="flex flex-col items-center lg:items-start gap-6 lg:col-span-2">
                    <img src="./images/RetasifyLogoYellow1.png" alt="Retasify Logo" class="h-16 w-auto">
                    <nav class="flex gap-8 text-white">
                        <a href="#" class="hover:text-[#F4B840] transition-colors">About Us</a>
                        <a href="#" class="hover:text-[#F4B840] transition-colors">Plans & Pricing</a>
                        <a href="#" class="hover:text-[#F4B840] transition-colors">FAQ</a>
                        <a href="#" class="hover:text-[#F4B840] transition-colors">Features</a>
                    </nav>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="text-center md:text-left">
                        <h3 class="text-white text-lg font-medium mb-4 tracking-wider">FOLLOW US</h3>
                        <div class="flex justify-center md:justify-start gap-3">
                            <a href="#" class="w-10 h-10 bg-white rounded-full flex items-center justify-center hover:bg-[#7A875B] transition-colors">
                                <i class="fab fa-tiktok text-[#48583B] hover:text-white text-lg"></i>
                            </a>
                            <a href="#" class="w-10 h-10 bg-white rounded-full flex items-center justify-center hover:bg-[#7A875B] transition-colors">
                                <i class="fab fa-instagram text-[#48583B] hover:text-white text-lg"></i>
                            </a>
                            <a href="#" class="w-10 h-10 bg-white rounded-full flex items-center justify-center hover:bg-[#7A875B] transition-colors">
                                <i class="fab fa-facebook text-[#48583B] hover:text-white text-lg"></i>
                            </a>
                        </div>
                    </div>
                    <div class="text-center md:text-left">
                        <h3 class="text-white text-lg font-medium mb-4 tracking-wider">CONTACT</h3>
                        <div class="text-white space-y-2">
                            <p>info@gmail.com</p>
                            <p>+234(8729883793)</p>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="border-[#71777D] mb-8">
        </div>
    </footer>
<script>
    // Initialize everything when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Date Pickers
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        
        // Initialize date pickers if the elements exist
        if (startDateInput && endDateInput) {
            // End date picker (needs to be defined first for reference)
            const endDatePicker = flatpickr(endDateInput, {
                minDate: 'today',
                dateFormat: 'M j, Y',
                theme: 'material_theme'
            });

            // Start date picker
            const startDatePicker = flatpickr(startDateInput, {
                minDate: 'today',
                dateFormat: 'M j, Y',
                onChange: function(selectedDates, dateStr) {
                    // When start date is selected, update end date's minDate
                    if (endDatePicker) {
                        endDatePicker.set('minDate', dateStr);
                        
                        // If end date is before the new start date, clear it
                        if (endDatePicker.selectedDates[0] && endDatePicker.selectedDates[0] < selectedDates[0]) {
                            endDatePicker.clear();
                        }
                    }
                },
                theme: 'material_blue'
            });
        }

        // User dropdown functionality
        const userDropdown = document.getElementById('userDropdown');
        const dropdownMenu = document.getElementById('dropdownMenu');

        if (userDropdown && dropdownMenu) {
            userDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
                // Position the dropdown just below the button
                const rect = userDropdown.getBoundingClientRect();
                dropdownMenu.style.position = 'absolute';
                dropdownMenu.style.top = `${rect.bottom + window.scrollY}px`;
                dropdownMenu.style.left = `${rect.left + window.scrollX}px`;
                dropdownMenu.classList.toggle('hidden');
            });

            // Prevent dropdown from closing when clicking inside it
            dropdownMenu.addEventListener('click', function(e) {
                e.stopPropagation();
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                if (dropdownMenu && !dropdownMenu.classList.contains('hidden')) {
                    dropdownMenu.classList.add('hidden');
                }
            });
        }

        // Toggle dropdown when clicking the user icon
        const userIcon = document.querySelector('.user-icon');
        if (userIcon && dropdownMenu) {
            userIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                dropdownMenu.classList.toggle('hidden');
            });
        }

        // Handle click on dropdown items
        document.querySelectorAll('.dropdown-item').forEach(item => {
            item.addEventListener('click', function() {
                if (dropdownMenu) {
                    dropdownMenu.classList.add('hidden');
                }
            });
        });

        // Rent button functionality
        const rentBtn = document.getElementById('rentBtn');
        const renterDetailsModal = document.getElementById('renterDetailsModal');
        
        if (rentBtn && renterDetailsModal) {
            rentBtn.addEventListener('click', function(e) {
                e.preventDefault();
                renterDetailsModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            });
            
            // Close modal when clicking outside
            renterDetailsModal.addEventListener('click', function(e) {
                if (e.target === renterDetailsModal) {
                    renterDetailsModal.classList.add('hidden');
                    document.body.style.overflow = ''; // Re-enable background scrolling
                }
            });
            
            // Close modal when clicking the close button (if exists)
            const closeModalBtn = renterDetailsModal.querySelector('button[aria-label="Close"]');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', function() {
                    renterDetailsModal.classList.add('hidden');
                    document.body.style.overflow = ''; // Re-enable background scrolling
                });
            }
        }
    }
);

// Function to close the renter modal
function closeRenterModal() {
    const renterDetailsModal = document.getElementById('renterDetailsModal');
    if (renterDetailsModal) {
        renterDetailsModal.classList.add('hidden');
        document.body.style.overflow = ''; // Re-enable background scrolling
    }
}
</script>
</body>
</html>
